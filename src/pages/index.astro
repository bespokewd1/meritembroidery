---
import BaseLayout from "@layouts/BaseLayout.astro";
import CTA from "@components/CTA.astro";
import FAQ from "@components/FAQ.astro";
import "../styles/global.css";
import { Image, Picture } from "astro:assets";
import landingImage from "@assets/images/logo.png";
import landingImage2 from "@assets/images/merit-images/merit-0318.jpg";
import { getImage } from "astro:assets";
import ApplicationLogosCarousel from "@components/ApplicationLogosCarousel.astro";
import ButtonLink from "@components/Ui/ButtonLink.astro";
import Reviews from "@components/Testimonials/Reviews.astro";
import { ServiceCards } from "@components/ServiceCards";
import TrustBadgeSection from "@components/TrustBadge/TrustBadgeSection.astro";

import BlazeSlider from "blaze-slider";
import "blaze-slider/dist/blaze.css";
import AboutUs from "@components/About/AboutUs.astro";

// Optimize our landing image and pass it as props to the BaseLayout (for preloading) and Landing (for rendering)
const optimizedImage = await getImage({ src: landingImage, format: "avif" });
---

<BaseLayout
  title="Merit Embroidery | Edmonton Embroidery, Screen Printing & Custom Apparel"
  description="High-quality in-house embroidery, screen printing, and custom apparel decoration in Edmonton. Serving businesses across Alberta and North America with fast, reliable, and professional service."
  preloadedImage={optimizedImage}
>
  <!-- ============================================ -->
  <!--                    Hero                      -->
  <!-- ============================================ -->

  <section id="hero" class="hero-gradient m-0 w-full p-0">
    <div
      class="flex size-full h-[50dvh] max-h-145 flex-col items-center justify-center p-0 sm:flex-row lg:h-[calc(100dvh-6.6875rem)] lg:max-h-full"
    >
      <div class="hidden size-full items-center justify-center xl:flex">
        <Image
          src={landingImage}
          alt="embroidery machines"
          loading="eager"
          fetchpriority="high"
          class="flex size-full h-auto max-w-150 items-center justify-start object-cover"
        />
      </div>
      <div class="relative grid size-full max-h-[inherit]">
        <!-- class:list={[
            "absolute right-0 bottom-0 left-0 flex flex-col items-center gap-3 p-4 backdrop-blur-md [grid-area:1/1]",
            "lg:top-0 lg:right-auto lg:bottom-auto lg:left-0 lg:max-w-xl lg:-translate-1/2 lg:items-start",
            "lg:corner-squircle lg:rounded-2xl supports-[corner-shape:squircle]:lg:rounded-4xl",
          ]} -->
        <div
          class:list={[
            "absolute top-1/2 left-1/2 flex -translate-1/2 flex-col items-center gap-3 p-4 backdrop-blur-md [grid-area:1/1]",
            "lg:left-0 lg:max-w-xl lg:translate-x-0 lg:items-start",
            "lg:corner-squircle lg:rounded-2xl supports-[corner-shape:squircle]:lg:rounded-4xl",
          ]}
        >
          <h1 class="cs-title m-0 text-center text-white lg:text-left">
            <!-- Your Trusted Promotional Decorators! -->
            Your Trusted One Stop Promotional Decorators
          </h1>
          <p
            class="m-0 text-center text-xl font-bold text-white/90 md:text-2xl lg:text-left"
          >
            Quality, Delivery, Service, Innovation
          </p>
          <!-- <ButtonLink href="/get-a-quote" class={"mt-6"}>
            Get A Quote
          </ButtonLink> -->

          <ButtonLink
            class="h-auto py-3 leading-4 font-normal tracking-wider"
            href="/portfolio"
          >
            Get Started with
            <br />
            <span class="text-2xl leading-5 font-semibold tracking-widest">
              a Quote Today!
            </span>
          </ButtonLink>
        </div>
      </div>
    </div>
  </section>

  <TrustBadgeSection />

  <div class="bg-accent-light relative p-0 pb-32">
    <div
      class="corner-squircle bg-accent-dark absolute inset-0 z-1 mx-[min(4rem,95%)] mb-[min(1rem,95%)] rounded-t-[400px] rounded-b-[100px] supports-[corner-shape:squircle]:rounded-t-[800px] supports-[corner-shape:squircle]:rounded-b-[150px]"
    >
    </div>
    <!-- ============================================ -->
    <!--                   Services                   -->
    <!-- ============================================ -->
    <ServiceCards className="z-2" client:visible />
    <!-- ============================================ -->
    <!--                   Gallery                    -->
    <!-- ============================================ -->
    <ApplicationLogosCarousel class="z-2" />
  </div>

  <!-- ============================================ -->
  <!--                 About Us                     -->
  <!-- ============================================ -->
  <AboutUs />

  <!-- ============================================ -->
  <!--                    FAQ                       -->
  <!-- ============================================ -->
  <FAQ />

  <!-- ============================================ -->
  <!--                  Reviews                     -->
  <!-- ============================================ -->
  <Reviews />

  <CTA />
</BaseLayout>

<style lang="less">
  /* Hero Gradient Background */
  .hero-gradient {
    background:
      radial-gradient(
        ellipse 80% 100% at 25% 50%,
        rgba(255, 255, 255, 0.5) 0%,
        rgba(180, 210, 255, 0.8) 5%,
        rgba(70, 130, 220, 0.6) 25%,
        rgba(30, 70, 160, 0.4) 45%,
        transparent 75%
      ),
      radial-gradient(
        ellipse 60% 80% at 20% 60%,
        rgba(255, 255, 255, 0.5) 0%,
        rgba(100, 160, 230, 0.3) 30%,
        transparent 60%
      ),
      linear-gradient(
        to right,
        #1e3a8a 0%,
        #1e40af 30%,
        var(--color-accent-light) 70%
      );

    // #1e3a8a 70%,
    background-color: var(--color-accent-light);
  }

  .trust-badges-section {
    background: linear-gradient(
      to right,
      #1e3a8a 0%,
      #1e40af 30%,
      var(--color-accent-light) 70%
    );

    // #1e3a8a 70%,
    background-color: var(--color-accent-light);
  }
  /* STYLES FOR ABOVE THE FOLD */

  /*-- -------------------------- -->
<---           Hero             -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    #hero {
      font-family: "Roboto", "Arial", sans-serif;
      /* Centers button */
      text-align: center;
      /* changes on tablet */
      padding: 0 (16/16rem);
      padding-bottom: (100/16rem);
      position: relative;
      z-index: 1;
      /* prevents overflow from the lines extending past the screen width */
      overflow: hidden;

      .cs-picture {
        /* Background Image */
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -2;

        &:before {
          /* Black Color Overlay */
          content: "";
          width: 100%;
          height: 100%;
          background: #000;
          opacity: 0.7;
          display: block;
          position: absolute;
          top: 0;
          left: 0;
          z-index: 1;
          /* prevents the cursor from interacting with it */
          pointer-events: none;
        }

        img {
          width: 100%;
          height: 100%;
          /* Makes image act like a background-image */
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-container {
        width: 100%;
        max-width: (1280/16em);
        margin: auto;
        /* we put the padding top and bottom on the container instead of #Hero so the pseudo element lines go to the top and bottom of the section */
        /* 144px - 280px - leaving extra space for the navigation */
        /* changes on tablet */
        padding: clamp(9em, 25.95vw, 17.5em) 0;
        position: relative;

        &:before {
          /* Left Line */
          content: "";
          width: 1px;
          height: 100%;
          background: -moz-linear-gradient(
            top,
            rgba(250, 251, 252, 0.5) 0%,
            rgba(250, 251, 252, 0) 100%
          ); /* FF3.6-15 */
          background: -webkit-linear-gradient(
            top,
            rgba(250, 251, 252, 0.5) 0%,
            rgba(250, 251, 252, 0) 100%
          ); /* Chrome10-25,Safari5.1-6 */
          opacity: 1;
          display: block;
          position: absolute;
          top: 0;
          left: 0;
        }
      }

      .cs-flex-group {
        width: 80vw;
        /* 464px - 562px */
        max-width: clamp(29em, 60vw, 65.125em);
        margin: auto;
        /* 60px - 220px */
        margin-bottom: clamp(3.75em, 15.5vw, 13.75em);
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        flex-wrap: wrap;
      }

      .cs-topper {
        text-align: center;
        margin-bottom: (16/16rem);
        color: var(--primaryLight);
      }

      .cs-title {
        text-align: center;
        width: 100%;
        color: var(--bodyTextColorWhite);
      }

      .cs-text {
        text-align: center;
        /* 32px - 40px */
        margin: 0 auto clamp(2rem, 4vw, 2.5rem) 0;
        /* 40px - 48px */
        margin-bottom: clamp(2.5rem, 4vw, 3rem);
        color: var(--bodyTextColorWhite);
      }

      .cs-button-solid {
        line-height: clamp(2.875em, 5.5vw, 3.5em);
        height: initial;
        margin-bottom: calc(16 / 16 * 1rem);
      }

      .cs-button-transparent {
        font-size: (16/16rem);
        font-weight: 700;
        /* 46px - 56px */
        line-height: clamp(2.875em, 5.5vw, 3.5em);
        text-decoration: none;
        width: (180/16rem);
        /* 46px - 56px */
        height: clamp(2.875em, 5.5vw, 3.5em);
        margin: 0 (8/16rem);
        box-sizing: border-box;
        padding: 0;
        color: #fff;
        background-color: transparent;
        border: 1px solid var(--bodyTextColorWhite);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        position: relative;
        z-index: 1;

        &:before {
          content: "";
          background: #000;
          opacity: 1;
          display: block;
          position: absolute;
          /* so it sits on top of the border */
          top: -1px;
          right: -1px;
          bottom: -1px;
          left: -1px;
          z-index: -1;
          /* this is what creates the grow affect on hover */
          transform: scaleX(0);
          transition: transform 0.3s;
          transform-origin: left;
        }

        &:hover {
          &:before {
            transform: scaleX(1);
          }
        }

        .cs-img {
          margin-right: (12/16rem);
          display: block;
        }
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48em) {
    #hero {
      /* 32px - 40px */
      padding: 0 clamp(2em, 5vw, 2.5em);

      .cs-container {
        padding: clamp(7em, 27.95vw, 17.5em) 0 0 0;
        &:after {
          /* Right Line */
          content: "";
          width: 1px;
          height: 100%;
          background: -moz-linear-gradient(
            top,
            rgba(250, 251, 252, 0) 0%,
            rgba(250, 251, 252, 0.5) 100%
          ); /* FF3.6-15 */
          background: -webkit-linear-gradient(
            top,
            rgba(250, 251, 252, 0) 0%,
            rgba(250, 251, 252, 0.5) 100%
          ); /* Chrome10-25,Safari5.1-6 */
          opacity: 1;
          display: block;
          position: absolute;
          top: 0;
          right: 0;
        }
      }

      .cs-button-solid {
        margin-right: (20/16rem);
        margin-bottom: 0;
      }
    }
  }

  /* Desktop Parallax Effect - 1300px */
  // @media only screen and (min-width: 81.25em) {
  //   #hero {
  //     background: url("/assets/images/hero.jpg");
  //     background-position: center;
  //     background-size: cover;
  //     background-repeat: no-repeat;
  //     /* creates parallax effect on background image */
  //     background-attachment: fixed;
  //   }
  // }

  // /* Dark Mode */
  // @media only screen and (min-width: 0em) {
  //   body.dark-mode {
  //     #hero {
  //       .cs-background {
  //         &:before {
  //           opacity: 0.8;
  //         }
  //       }
  //     }
  //   }
  // }

  /*-- -------------------------- -->
<---          Services          -->
<--- -------------------------- -*/

  @media only screen and (min-width: 0em) {
    #services {
      margin-bottom: 32px;
      .title-banner {
        padding: 32px 16px;
        background: var(--primary);
        .cs-title {
          color: #fff;
          text-align: center;
          margin: 0;
        }
      }
      .container {
        scroll-margin-top: 100px;
        width: 100%;
        .left-right {
          display: flex;
          flex-direction: column;
          gap: 32px;
          .left {
            .content {
              width: 96%;
              margin: auto;

              .cs-title {
                color: var(--primary);
                font-size: 28px;
                font-weight: 700;
                margin: 16px 0;
              }
              .cs-text {
                margin-bottom: 32px;
              }
              ul {
                margin-bottom: 32px;
              }
            }
          }
          .right {
          }
        }
      }
    }
  }

  @media only screen and (min-width: 64em) {
    #services {
      .title-banner {
        .cs-title {
        }
      }
      .container {
        .left-right {
          flex-direction: row;
          .left {
            width: 45%;
            // min-width: 500px;
            margin: auto;
            .content {
              width: 80%;
              margin: auto;
              .cs-title {
              }
              .cs-text {
              }
            }
          }
          .right {
            width: 55%;
          }
        }
      }
    }
  }
  // reverse
  @media only screen and (min-width: 0em) {
    #services-reverse {
      margin-bottom: 32px;
      .title-banner {
        padding: 32px 16px;
        background: var(--primary);
        .cs-title {
          color: #fff;
          text-align: center;
          margin: 0;
        }
      }
      .container {
        scroll-margin-top: 100px;
        width: 100%;
        .left-right {
          display: flex;
          flex-direction: column;
          gap: 32px;
          .left {
            .content {
              width: 96%;
              margin: auto;

              .cs-title {
                color: var(--primary);
                font-size: 28px;
                font-weight: 700;
                margin: 16px 0;
              }
              .cs-text {
                margin-bottom: 32px;
              }
            }
          }
          .right {
          }
        }
      }
    }
  }

  @media only screen and (min-width: 64em) {
    #services-reverse {
      .title-banner {
        .cs-title {
        }
      }
      .container {
        .left-right {
          flex-direction: row;
          .left {
            order: 1;
            width: 45%;
            // min-width: 500px;
            margin: auto;
            .content {
              width: 80%;
              margin: auto;
              .cs-title {
              }
              .cs-text {
              }
            }
          }
          .right {
            order: 0;
            width: 55%;
          }
        }
      }
    }
  }
</style>

<script>
  import BlazeSlider from "blaze-slider";
  import "blaze-slider/dist/blaze.css";

  document.querySelectorAll(".blaze-slider").forEach((el) => {
    new BlazeSlider(el as HTMLElement, {
      all: {
        enableAutoplay: true,
        autoplayInterval: 2000,
        transitionDuration: 300,
        slidesToShow: 3,
      },
      "(max-width: 900px)": {
        slidesToShow: 2,
      },
      "(max-width: 650px)": {
        slidesToShow: 1,
      },
    });
  });
</script>
